export default async function handler(req, res) {
  // Allow CORS
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

  if (req.method === 'OPTIONS') {
    return res.status(200).end();
  }

  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  const { topic, style } = req.body;

  // –í–ò–ù–ê–ì–ò –≤—Ä—ä—â–∞–º–µ —É—Å–ø–µ—à–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä —Å –¥–µ–º–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ
  const demoCourse = `
üéØ –ö–£–†–°: ${topic}
üìö –°–¢–ò–õ: ${style}

‚úÖ –£–°–ü–ï–®–ù–û –°–™–ó–î–ê–î–ï–ù –ö–£–†–°!

–ó–ê–ì–õ–ê–í–ò–ï: "–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –∫—É—Ä—Å –ø–æ ${topic}"
–û–ü–ò–°–ê–ù–ò–ï: –¢–æ–∑–∏ –∫—É—Ä—Å –µ —Å—ä–∑–¥–∞–¥–µ–Ω —Å–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞ —Ç–µ–± —Å–ø–æ—Ä–µ–¥ –∏–∑–±—Ä–∞–Ω–∏—è —Å—Ç–∏–ª –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ.

–ú–û–î–£–õ 1: –û–°–ù–û–í–ò –ù–ê ${topic.toUpperCase()}
‚úì –£—Ä–æ–∫ 1: –í—ä–≤–µ–¥–µ–Ω–∏–µ –∏ –æ—Å–Ω–æ–≤–Ω–∏ –ø–æ–Ω—è—Ç–∏—è
‚úì –£—Ä–æ–∫ 2: –ö–ª—é—á–æ–≤–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∏ –∏ —Ç–µ—Ö–Ω–∏–∫–∏
‚úì –£—Ä–æ–∫ 3: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
üéØ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ: –ü—Ä–∏–ª–æ–∂–∏ –∑–Ω–∞–Ω–∏—è—Ç–∞ –≤ —Ä–µ–∞–ª–Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—è

–ú–û–î–£–õ 2: –†–ê–ó–®–ò–†–ï–ù–ò –í–™–ó–ú–û–ñ–ù–û–°–¢–ò
‚úì –£—Ä–æ–∫ 1: –ù–∞–ø—Ä–µ–¥–Ω–∞–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
‚úì –£—Ä–æ–∫ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
‚úì –£—Ä–æ–∫ 3: –ò–∑–±—è–≥–≤–∞–Ω–µ –Ω–∞ —á–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –≥—Ä–µ—à–∫–∏
üéØ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ: –°—ä–∑–¥–∞–π —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç

–ú–û–î–£–õ 3: –ú–ê–ô–°–¢–û–†–°–¢–í–û
‚úì –£—Ä–æ–∫ 1: –ï–∫—Å–ø–µ—Ä—Ç–Ω–∏ —Ç–µ—Ö–Ω–∏–∫–∏
‚úì –£—Ä–æ–∫ 2: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–∞–∑–ª–∏—á–Ω–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∏
‚úì –£—Ä–æ–∫ 3: –ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–Ω–µ –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ—Ç–æ
üéØ –§–∏–Ω–∞–ª–µ–Ω –ø—Ä–æ–µ–∫—Ç: –ü—Ä–∏–ª–æ–∂–∏ –≤—Å–∏—á–∫–æ –Ω–∞—É—á–µ–Ω–æ

üìû –ó–∞ –ø–æ–≤–µ—á–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: AI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç—Ç–∞ —Å–µ –Ω–∞—Å—Ç—Ä–æ–π–≤–∞...
`;

  // –°–∏–º—É–ª–∏—Ä–∞–º–µ –º—Ä–µ–∂–æ–≤–æ –∑–∞–±–∞–≤—è–Ω–µ
  await new Promise(resolve => setTimeout(resolve, 1500));

  res.status(200).json({
    success: true,
    course: demoCourse,
    note: "–¢–æ–≤–∞ –µ –¥–µ–º–æ –≤–µ—Ä—Å–∏—è. AI —â–µ –±—ä–¥–µ –¥–æ–±–∞–≤–µ–Ω–∞ —Å–∫–æ—Ä–æ!"
  });
}
